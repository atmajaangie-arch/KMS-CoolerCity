<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BookStack-style KMS — Cooler City Salatiga</title>
  <meta name="description" content="Prototype KMS (BookStack-themed) — Cooler City Salatiga" />
  <style>
    :root{
      --bg:#f6f8fb;
      --panel:#ffffff;
      --muted:#6b7280;
      --brand:#0b57d0;
      --accent:#0f62fe;
      --glass: rgba(255,255,255,0.6);
      --card-shadow: 0 8px 22px rgba(12,22,48,0.06);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#eef3ff 0%,var(--bg) 100%);color:#0f1724}
    a { color:var(--brand); text-decoration:none; }

    .wrap{max-width:1200px;margin:28px auto;padding:18px;}

    .cover{max-width:980px;margin:0 auto 20px auto;padding:40px;border-radius:12px;background:linear-gradient(180deg,var(--brand),#3e9bf6);color:#fff;box-shadow:0 18px 50px rgba(3,7,18,0.18)}
    .cover h1{margin:0;font-size:28px}
    .cover h2{margin:6px 0 0 0;font-size:20px}
    .cover .meta{margin-top:18px;font-size:14px}

    header{display:flex;align-items:center;gap:12px;margin:18px 0}
    .logo{width:56px;height:56px;border-radius:8px;background:#fff;display:flex;align-items:center;justify-content:center}
    .brand h3{margin:0;font-size:18px}
    .brand p{margin:0;color:var(--muted);font-size:13px}

    .nav-actions{margin-left:auto;display:flex;align-items:center;gap:10px}
    .btn{background:var(--brand);color:white;padding:8px 12px;border-radius:8px;border:none;cursor:pointer;font-size:13px}
    .btn.ghost{background:transparent;color:var(--brand);border:1px solid rgba(11,85,208,0.12)}

    .layout{display:grid;grid-template-columns:260px 1fr;gap:18px}

    nav.sidebar{background:var(--panel);padding:14px;border-radius:10px;box-shadow:var(--card-shadow);height:calc(100vh - 220px);position:sticky;top:20px;overflow:auto}

    .search input{width:100%;padding:10px;border-radius:8px;border:1px solid #e9eef8}

    .shelf-list{list-style:none;padding:0;margin:6px 0}
    .shelf-item{padding:10px;border-radius:8px;cursor:pointer;border:1px solid transparent;display:flex;justify-content:space-between}
    .shelf-item.active{background:#eef6ff;border-color:#bdd7ff}

    main.content{min-height:70vh}

    .panel{background:var(--panel);padding:14px;border-radius:10px;box-shadow:var(--card-shadow);margin-bottom:14px}

    .books-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px;margin-top:12px}
    .book{padding:14px;border-radius:10px;border:1px solid #eef4ff;background:#fff}

    .detail{margin-top:12px;padding:16px;border-radius:10px;background:#fff;border:1px solid #edeffa}
    .detail.hidden{display:none !important}

    .tag{display:inline-block;padding:6px 8px;border-radius:999px;border:1px solid #e6eefc;font-size:12px;margin-right:8px;background:#fff}

    .hidden{display:none !important;}

    footer{text-align:center;margin-top:22px;color:var(--muted);font-size:13px}

    /* Modal backdrop */
    .modal-backdrop{
      position:fixed;
      inset:0;
      background:rgba(6,10,30,0.45);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
      z-index:60;
    }
  </style>
</head>

<body>
<div class="wrap">

<section class="cover">
  <div style="display:flex;justify-content:space-between">
    <div>
      <h1>Pengembangan Knowledge Management System</h1>
      <h2>Studi Kasus: <strong>Cooler City Salatiga</strong></h2>
      <div class="meta">Prototype front-end — Tema BookStack</div>
    </div>
    <div style="text-align:right">
      <div style="background:rgba(255,255,255,0.15);padding:8px;border-radius:8px;font-weight:700">Cooler City</div>
      <div style="margin-top:12px;font-size:14px">
        Nama: <strong>[Nama]</strong><br>
        NIM: <strong>[NIM]</strong>
      </div>
    </div>
  </div>
</section>

<header>
  <div style="display:flex;align-items:center;gap:12px">
    <div class="logo">
      <svg viewBox="0 0 64 64">
        <rect width="64" height="64" rx="10" fill="#0b57d0"/>
      </svg>
    </div>
    <div class="brand">
      <h3>Cooler City KMS (BookStack-theme)</h3>
      <p class="muted">Prototype tampilan — GitHub Pages</p>
    </div>
  </div>

  <div class="nav-actions">
    <div class="muted">Role: <strong id="currentRole">Guest</strong></div>
    <button class="btn" onclick="openLogin()">Login</button>
    <a class="btn ghost" href="#" onclick="downloadHTML(event)">Download</a>
  </div>
</header>
<div class="layout">

  <!-- SIDEBAR -->
  <nav class="sidebar">
    <div class="search">
      <input type="search" id="searchBox" placeholder="Cari dokumen..." oninput="filterAll()" />
    </div>

    <h4 style="margin:8px 0">Shelves & Books</h4>
    <ul class="shelf-list" id="shelfList"></ul>

    <hr style="border:none;border-top:1px solid #f0f4ff;margin:12px 0">

    <h5 style="margin:6px 0">Quick Links</h5>
    <ul style="padding-left:14px;color:var(--muted)">
      <li>Panduan Operasional</li>
      <li>Template SOP</li>
      <li>FAQ</li>
    </ul>
  </nav>

  <!-- MAIN CONTENT -->
  <main class="content">

    <!-- BOOKS PANEL -->
    <section class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <h3 style="margin:0">Books</h3>
          <div class="muted" id="bookCount">Menampilkan 0 buku</div>
        </div>
        <button class="btn" onclick="simulateAddBook()">+ Tambah Book</button>
      </div>

      <div class="books-grid" id="booksGrid"></div>
    </section>

    <!-- PAGES PANEL -->
    <section class="panel" id="pagesPanel">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <h3 style="margin:0">Pages</h3>
          <div class="muted" id="pagesCount">Pilih sebuah buku untuk melihat halaman</div>
        </div>
        <button class="btn" onclick="simulateAddPage()">+ Tambah Halaman</button>
      </div>

      <ul class="pages-list" id="pagesList" style="margin-top:12px"></ul>

      <div class="detail hidden" id="pageDetail">
        <h2 id="detailTitle">Judul Halaman</h2>
        <div class="meta" id="detailMeta"></div>
        <div id="detailContent" style="line-height:1.7;color:#0f1724"></div>
        <div class="tags" id="detailTags"></div>
      </div>
    </section>

    <!-- USER PANEL -->
    <section class="panel" id="userPanel" style="display:none">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <h3 style="margin:0">Manajemen User</h3>
          <div class="muted">Hanya Admin</div>
        </div>
        <button class="btn" onclick="simulateAddUser()">+ Tambah User</button>
      </div>

      <ul class="user-list" id="userList" style="margin-top:12px"></ul>
    </section>

    <footer>
      Prototype tampilan BookStack — Cooler City Salatiga • Host via GitHub Pages
    </footer>

  </main>
</div>
</div>
<!-- LOGIN MODAL -->
<div id="loginModal" class="modal-backdrop hidden">
  <div style="background:white;padding:18px;border-radius:12px;max-width:420px;width:100%;box-shadow:0 10px 40px rgba(3,7,18,0.35)">
    <h3 style="margin-top:0">Login Demo</h3>

    <div style="display:flex;gap:8px">
      <input id="loginUser" placeholder="username" 
             style="flex:1;padding:10px;border-radius:8px;border:1px solid #e9eef8" />
      <input id="loginPass" placeholder="password" type="password"
             style="flex:1;padding:10px;border-radius:8px;border:1px solid #e9eef8" />
    </div>

    <div style="text-align:right;margin-top:12px">
      <button class="btn" onclick="doLogin()">Masuk</button>
      <a href="#" onclick="closeLogin(event)" style="margin-left:8px;color:var(--muted)">Tutup</a>
    </div>

    <p class="muted" style="margin-top:10px;font-size:13px">
      Demo akun: <strong>admin/admin</strong>, 
      <strong>editor/editor</strong>, 
      <strong>guest/guest</strong>
    </p>
  </div>
</div>

<!-- SCRIPT -->
<script>
/* -------------------- Data -------------------- */
const BOOKS = [
  {id:'b_ops', title:'Operasional', desc:'Buku berisi SOP operasional harian', pages:[
    {id:'p1', title:'Checklist Harian Operasional', author:'asep', date:'2025-08-02',
     excerpt:'Daftar pemeriksaan shift manager.',
     content:'<ol><li>Periksa suhu unit</li><li>Catat pada logbook</li></ol>', tags:['checklist','ops']},
    {id:'p2', title:'Panduan Shift', author:'admin', date:'2025-06-05',
     excerpt:'Panduan tugas shift.',
     content:'<p>Penjelasan tugas shift manager dan staf.</p>', tags:['shift']}
  ]},
  {id:'b_sop', title:'SOP & Prosedur', desc:'SOP teknis dan prosedur keselamatan', pages:[
    {id:'p3', title:'SOP Pemeliharaan Cooler Unit', author:'admin', date:'2025-05-20',
     excerpt:'Langkah pemeliharaan rutin.',
     content:'<p>1. Matikan unit…<br/>2. Periksa kebocoran…</p>', tags:['maintenance','sop']},
    {id:'p4', title:'Prosedur Keamanan Listrik', author:'tech', date:'2025-06-10',
     excerpt:'Pencegahan kecelakaan listrik.',
     content:'<p>Gunakan APD saat bekerja.</p>', tags:['safety']}
  ]},
  {id:'b_pel', title:'Pelayanan Pelanggan', desc:'Panduan pelayanan & kebijakan pelanggan', pages:[
    {id:'p5', title:'Panduan Layanan - Refund', author:'anna', date:'2025-07-11',
     excerpt:'Prosedur refund pelanggan.',
     content:'<p>Ketentuan refund berlaku jika…</p>', tags:['policy','customer']}
  ]},
  {id:'b_mtc', title:'Maintenance', desc:'Perawatan & kebersihan', pages:[
    {id:'p6', title:'Panduan Kebersihan Area', author:'sweep', date:'2025-10-02',
     excerpt:'Frekuensi pembersihan area.',
     content:'<p>1x sehari: sapu & pel…</p>', tags:['cleaning']}
  ]}
];

const USERS = [
  {username:'admin', name:'Administrator', role:'Admin'},
  {username:'editor', name:'Editor Demo', role:'Editor'},
  {username:'guest', name:'Guest', role:'Guest'},
  {username:'asep', name:'Asep (Teknik)', role:'Editor'},
  {username:'anna', name:'Anna (Resepsionis)', role:'Editor'}
];

/* DOM refs */
const shelfList = document.getElementById('shelfList');
const booksGrid = document.getElementById('booksGrid');
const pagesList = document.getElementById('pagesList');
const pageDetail = document.getElementById('pageDetail');
const userList = document.getElementById('userList');
const userPanel = document.getElementById('userPanel');

/* -------------------- Render -------------------- */
function renderShelves(){
  shelfList.innerHTML='';
  BOOKS.forEach(b=>{
    const li=document.createElement('li');
    li.className='shelf-item';
    li.id='shelf-'+b.id;
    li.innerHTML=`<div>${b.title}</div><div class="muted">${b.pages.length}</div>`;
    li.onclick=()=>selectBook(b.id);
    shelfList.appendChild(li);
  });
}

function renderBooks(){
  booksGrid.innerHTML='';
  document.getElementById('bookCount').innerText = `Menampilkan ${BOOKS.length} buku`;
  BOOKS.forEach(b=>{
    const div=document.createElement('div');
    div.className='book';
    div.innerHTML=`
      <h4>${b.title}</h4>
      <div class="meta">${b.desc}</div>
      <div style="margin-top:10px"><small class="muted">${b.pages.length} halaman</small></div>
      <div style="margin-top:10px">
        <a href="#" onclick="selectBook('${b.id}');return false">Buka Buku</a>
      </div>`;
    booksGrid.appendChild(div);
  });
}

function selectBook(id){
  document.querySelectorAll('.shelf-item').forEach(el=>el.classList.remove('active'));
  const el=document.getElementById('shelf-'+id);
  if(el) el.classList.add('active');

  const bk=BOOKS.find(b=>b.id===id);
  pagesList.innerHTML='';
  document.getElementById('pagesCount').innerText=`${bk.pages.length} halaman — ${bk.title}`;

  bk.pages.forEach(p=>{
    const li=document.createElement('li');
    li.className='page-item';
    li.innerHTML=`
      <div>
        <div class="title">${p.title}</div>
        <div class="muted">${p.excerpt}</div>
      </div>
      <div class="muted" style="display:flex;gap:8px;align-items:center">
        ${p.date} <a href="#" onclick="openPage('${id}','${p.id}');return false">Buka</a>
      </div>`;
    pagesList.appendChild(li);
  });

  hidePageDetail();
}

function openPage(bid,pid){
  const bk=BOOKS.find(b=>b.id===bid);
  const p=bk.pages.find(x=>x.id===pid);

  document.getElementById('detailTitle').innerText=p.title;
  document.getElementById('detailMeta').innerText=
    `${bk.title} • ${p.author} • ${p.date}`;
  document.getElementById('detailContent').innerHTML=p.content;

  const tagsEl=document.getElementById('detailTags');
  tagsEl.innerHTML='';
  p.tags.forEach(t=>{
    const sp=document.createElement('span');
    sp.className='tag';
    sp.innerText=t;
    tagsEl.appendChild(sp);
  });

  pageDetail.classList.remove('hidden');
}

function hidePageDetail(){
  pageDetail.classList.add('hidden');
}

function renderUsers(){
  userList.innerHTML='';
  USERS.forEach(u=>{
    const li=document.createElement('li');
    li.className='user-item';
    li.innerHTML=`
      <div><strong>${u.name}</strong><div class="muted">${u.username}</div></div>
      <div style="display:flex;gap:8px;align-items:center">
        <div class="role">${u.role}</div>
        <button class="btn" onclick="alert('Demo edit user: ${u.username}')">Edit</button>
      </div>`;
    userList.appendChild(li);
  });
}

/* -------------------- Search -------------------- */
function filterAll(){
  const q=document.getElementById('searchBox').value.trim().toLowerCase();
  booksGrid.innerHTML='';
  let count=0;

  BOOKS.forEach(b=>{
    const matched =
      b.title.toLowerCase().includes(q) ||
      b.desc.toLowerCase().includes(q) ||
      b.pages.some(p=> (p.title+p.excerpt+p.content).toLowerCase().includes(q));

    if(q===''||matched){
      count++;

      const div=document.createElement('div');
      div.className='book';
      div.innerHTML=`
        <h4>${b.title}</h4>
        <div class="meta">${b.desc}</div>
        <div style="margin-top:10px"><small class="muted">${b.pages.length} halaman</small></div>
        <div style="margin-top:10px">
          <a href="#" onclick="selectBook('${b.id}');return false">Buka Buku</a>
        </div>`;
      booksGrid.appendChild(div);
    }
  });

  document.getElementById('bookCount').innerText=`Menampilkan ${count} buku`;
}

/* -------------------- Login -------------------- */
let currentRole='Guest';

function openLogin(){
  document.getElementById('loginModal').classList.remove('hidden');
}

function closeLogin(e){
  if(e) e.preventDefault();
  document.getElementById('loginModal').classList.add('hidden');
}

function doLogin(){
  const u=document.getElementById('loginUser').value.trim().toLowerCase();
  const p=document.getElementById('loginPass').value.trim();

  if((u==='admin'&&p==='admin')||
     (u==='editor'&&p==='editor')||
     (u==='guest'&&p==='guest')){
      
    const usr = USERS.find(x=>x.username===u);
    currentRole=usr.role;

    document.getElementById('currentRole').innerText=currentRole;
    document.getElementById('loginModal').classList.add('hidden');
    applyRoleUI();

    alert('Login sukses: '+usr.name+' ('+usr.role+')');
  }
  else {
    alert('Akun demo: admin/admin, editor/editor, guest/guest');
  }
}

function applyRoleUI(){
  userPanel.style.display = (currentRole==='Admin'?'block':'none');

  document.querySelectorAll('button').forEach(btn=>{
    if(btn.textContent.includes('Tambah')){
      btn.disabled = (currentRole==='Guest');
      btn.style.opacity = btn.disabled?0.6:1;
    }
  });

  renderUsers();
}

/* -------------------- Simulasi Tambah -------------------- */
function simulateAddBook(){
  if(currentRole==='Guest') return alert('Hanya Editor/Admin');

  const id='b'+Date.now();
  BOOKS.unshift({id,title:'Buku Baru',desc:'Deskripsi buku',pages:[]});
  renderShelves();
  renderBooks();
}

function simulateAddPage(){
  if(currentRole==='Guest') return alert('Hanya Editor/Admin');

  const bk=BOOKS[0];
  bk.pages.unshift({
    id:'p'+Date.now(),
    title:'Halaman Baru',
    author:currentRole==='Admin'?'admin':'editor',
    date:new Date().toISOString().slice(0,10),
    excerpt:'Excerpt halaman baru',
    content:'<p>Konten demo halaman baru.</p>',
    tags:['baru']
  });

  renderShelves();
  selectBook(bk.id);
}

function simulateAddUser(){
  if(currentRole!=='Admin') return alert('Hanya Admin');

  const uname='user'+Date.now();
  USERS.push({username:uname,name:'User Baru',role:'Editor'});
  renderUsers();
}

/* -------------------- Download HTML -------------------- */
function downloadHTML(e){
  e.preventDefault();
  const blob=new Blob([document.documentElement.outerHTML],{type:'text/html'});
  const url=URL.createObjectURL(blob);
  const a=document.createElement('a');
  a.href=url;
  a.download='kms-cooler-city.html';
  a.click();
  URL.revokeObjectURL(url);
}

/* -------------------- Init -------------------- */
renderShelves();
renderBooks();
applyRoleUI();

document.addEventListener('keydown',e=>{
  if(e.key==='Escape') closeLogin();
});
</script>

</body>
</html>
